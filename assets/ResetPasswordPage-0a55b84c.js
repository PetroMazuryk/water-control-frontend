import{u as y,V as C,H as E,c as S,r as i,j as s,h as d,a6 as L,t as p}from"./index-3e275163.js";import{c as $,a as m,b as v,u as k,o as F}from"./index.esm-9a2d60ab.js";import{L as M,s as u}from"./Logo-cc691e98.js";const T="_resetComponent_1fl9c_1",V="_resetForm_1fl9c_9",R="_resetTitle_1fl9c_16",q="_resetLabel_1fl9c_27",O="_resetInput_1fl9c_39",z="_resetInputError_1fl9c_57",A="_resetErrorMessage_1fl9c_71",D="_resetPassword_1fl9c_79",H="_passwordIconBtn_1fl9c_83",U="_passwordIcon_1fl9c_83",Z="_resetButtonsContainer_1fl9c_98",G="_resetBtn_1fl9c_107",e={resetComponent:T,resetForm:V,resetTitle:R,resetLabel:q,resetInput:O,resetInputError:z,resetErrorMessage:A,resetPassword:D,passwordIconBtn:H,passwordIcon:U,resetButtonsContainer:Z,resetBtn:G},W=()=>{const{t}=y(),w=C(),a=E(),h=S(),f=new URLSearchParams(w.search).get("token"),[n,_]=i.useState(!1),[c,x]=i.useState(!1),j=()=>_(o=>!o),P=()=>x(o=>!o),b=$({password:m().required("Потрібен пароль").min(7,"Пароль має містити принаймні 7 символів").matches(/^(?=.*[A-Za-z])(?=.*\d)/,"Пароль повинен містити літери та цифри"),confirmPassword:m().oneOf([v("password")],"Паролі мають збігатися").required("Підтвердження пароля є обов’язковим")}),{register:l,handleSubmit:g,formState:{errors:r,isSubmitting:N},reset:I}=k({resolver:F(b),mode:"onBlur"}),B=async({password:o})=>{try{await h(L({token:f,password:o})).unwrap(),p.success("Пароль успішно змінено"),I(),a("/login")}catch{p.error("Не вдалося змінити пароль")}};return s.jsxs("section",{className:e.resetComponent,children:[s.jsx(M,{}),s.jsx("div",{className:"container",children:s.jsxs("form",{className:e.resetForm,onSubmit:g(B),noValidate:!0,children:[s.jsx("h2",{className:e.resetTitle,children:t("changePassword")}),s.jsxs("label",{className:e.resetLabel,children:[s.jsx("span",{children:t("newPassword")}),s.jsxs("span",{className:e.resetPassword,children:[s.jsx("input",{type:n?"text":"password",...l("password"),placeholder:t("placeholderNewPassword"),className:d(e.resetInput,{[e.resetInputError]:r.password})}),s.jsx("button",{type:"button",onClick:j,className:e.passwordIconBtn,children:s.jsx("svg",{className:e.passwordIcon,children:s.jsx("use",{href:`${u}#${n?"icon-eye":"icon-eye-off"}`})})})]}),r.password&&s.jsx("p",{className:e.resetErrorMessage,children:r.password.message})]}),s.jsxs("label",{className:e.resetLabel,children:[s.jsx("span",{children:t("confirmPassword")}),s.jsxs("span",{className:e.resetPassword,children:[s.jsx("input",{type:c?"text":"password",...l("confirmPassword"),placeholder:"Повторіть пароль",className:d(e.resetInput,{[e.resetInputError]:r.confirmPassword})}),s.jsx("button",{type:"button",onClick:P,className:e.passwordIconBtn,children:s.jsx("svg",{className:e.passwordIcon,children:s.jsx("use",{href:`${u}#${c?"icon-eye":"icon-eye-off"}`})})})]}),r.confirmPassword&&s.jsx("p",{className:e.resetErrorMessage,children:r.confirmPassword.message})]}),s.jsxs("div",{className:e.resetButtonsContainer,children:[s.jsx("button",{type:"button",className:e.resetBtn,onClick:()=>a("/login"),children:t("cancelOut")}),s.jsx("button",{type:"submit",className:e.resetBtn,disabled:N,children:"Змінити пароль"})]})]})})]})};export{W as default};
