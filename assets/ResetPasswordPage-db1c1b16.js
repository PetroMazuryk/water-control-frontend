import{M as B,z as y,c as C,r as l,j as s,h as i,a1 as E,l as d}from"./index-6a9c3137.js";import{c as S,a as p,b as $,u as v,o as L}from"./index.esm-aafeefdc.js";import{s as m}from"./sprite-03122df9.js";const k="_resetComponent_eelx0_1",M="_resetTitle_eelx0_9",F="_resetForm_eelx0_19",T="_resetLabel_eelx0_25",R="_resetInput_eelx0_37",V="_resetInputError_eelx0_55",q="_resetErrorMessage_eelx0_69",z="_resetPassword_eelx0_77",A="_passwordIconBtn_eelx0_81",D="_passwordIcon_eelx0_81",O="_resetButtonsContainer_eelx0_96",U="_resetBtn_eelx0_105",e={resetComponent:k,resetTitle:M,resetForm:F,resetLabel:T,resetInput:R,resetInputError:V,resetErrorMessage:q,resetPassword:z,passwordIconBtn:A,passwordIcon:D,resetButtonsContainer:O,resetBtn:U},J=()=>{const u=B(),o=y(),w=C(),x=new URLSearchParams(u.search).get("token"),[a,h]=l.useState(!1),[n,_]=l.useState(!1),j=()=>h(t=>!t),b=()=>_(t=>!t),f=S({password:p().required("Потрібен пароль").min(7,"Пароль має містити принаймні 7 символів").matches(/^(?=.*[A-Za-z])(?=.*\d)/,"Пароль повинен містити літери та цифри"),confirmPassword:p().oneOf([$("password")],"Паролі мають збігатися").required("Підтвердження пароля є обов’язковим")}),{register:c,handleSubmit:g,formState:{errors:r,isSubmitting:I},reset:N}=v({resolver:L(f),mode:"onBlur"}),P=async({password:t})=>{try{await w(E({token:x,password:t})).unwrap(),d.success("Пароль успішно змінено"),N(),o("/login")}catch{d.error("Не вдалося змінити пароль")}};return s.jsx("section",{className:e.resetComponent,children:s.jsx("div",{className:"container",children:s.jsxs("form",{className:e.resetForm,onSubmit:g(P),noValidate:!0,children:[s.jsx("h2",{className:e.resetTitle,children:"Зміна пароля"}),s.jsxs("label",{className:e.resetLabel,children:[s.jsx("span",{children:"Новий пароль"}),s.jsxs("span",{className:e.resetPassword,children:[s.jsx("input",{type:a?"text":"password",...c("password"),placeholder:"Введіть новий пароль",className:i(e.resetInput,{[e.resetInputError]:r.password})}),s.jsx("button",{type:"button",onClick:j,className:e.passwordIconBtn,children:s.jsx("svg",{className:e.passwordIcon,children:s.jsx("use",{href:`${m}#${a?"icon-eye":"icon-eye-off"}`})})})]}),r.password&&s.jsx("p",{className:e.resetErrorMessage,children:r.password.message})]}),s.jsxs("label",{className:e.resetLabel,children:[s.jsx("span",{children:"Підтвердити пароль"}),s.jsxs("span",{className:e.resetPassword,children:[s.jsx("input",{type:n?"text":"password",...c("confirmPassword"),placeholder:"Повторіть пароль",className:i(e.resetInput,{[e.resetInputError]:r.confirmPassword})}),s.jsx("button",{type:"button",onClick:b,className:e.passwordIconBtn,children:s.jsx("svg",{className:e.passwordIcon,children:s.jsx("use",{href:`${m}#${n?"icon-eye":"icon-eye-off"}`})})})]}),r.confirmPassword&&s.jsx("p",{className:e.resetErrorMessage,children:r.confirmPassword.message})]}),s.jsxs("div",{className:e.resetButtonsContainer,children:[s.jsx("button",{type:"button",className:e.resetBtn,onClick:()=>o("/login"),children:"Скасувати"}),s.jsx("button",{type:"submit",className:e.resetBtn,disabled:I,children:"Змінити пароль"})]})]})})})};export{J as default};
