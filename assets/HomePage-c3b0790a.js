import{r as u,g as M,a as G,j as o,L as z,i as U,c as J,u as B,s as H,b,d as X,e as Y,f as K,h as Q,k as Z}from"./index-c87aa273.js";import{s as V,L as ee}from"./sprite-26f20223.js";import{A as ne}from"./AdvantagesSection-cc4dab2b.js";const te=(e,n,s,c)=>{var t,i,w,h;const a=[s,{code:n,...c||{}}];if((i=(t=e==null?void 0:e.services)==null?void 0:t.logger)!=null&&i.forward)return e.services.logger.forward(a,"warn","react-i18next::",!0);x(a[0])&&(a[0]=`react-i18next:: ${a[0]}`),(h=(w=e==null?void 0:e.services)==null?void 0:w.logger)!=null&&h.warn?e.services.logger.warn(...a):console!=null&&console.warn&&console.warn(...a)},$={},v=(e,n,s,c)=>{x(s)&&$[s]||(x(s)&&($[s]=new Date),te(e,n,s,c))},F=(e,n)=>()=>{if(e.isInitialized)n();else{const s=()=>{setTimeout(()=>{e.off("initialized",s)},0),n()};e.on("initialized",s)}},T=(e,n,s)=>{e.loadNamespaces(n,F(e,s))},A=(e,n,s,c)=>{if(x(s)&&(s=[s]),e.options.preload&&e.options.preload.indexOf(n)>-1)return T(e,s,c);s.forEach(a=>{e.options.ns.indexOf(a)<0&&e.options.ns.push(a)}),e.loadLanguages(n,F(e,c))},se=(e,n,s={})=>!n.languages||!n.languages.length?(v(n,"NO_LANGUAGES","i18n.languages were undefined or empty",{languages:n.languages}),!0):n.hasLoadedNamespace(e,{lng:s.lng,precheck:(c,a)=>{var t;if(((t=s.bindI18n)==null?void 0:t.indexOf("languageChanging"))>-1&&c.services.backendConnector.backend&&c.isLanguageChangingTo&&!a(c.isLanguageChangingTo,e))return!1}}),x=e=>typeof e=="string",oe=e=>typeof e=="object"&&e!==null,ce=u.createContext();class ae{constructor(){this.usedNamespaces={}}addUsedNamespaces(n){n.forEach(s=>{this.usedNamespaces[s]||(this.usedNamespaces[s]=!0)})}getUsedNamespaces(){return Object.keys(this.usedNamespaces)}}const ie=(e,n)=>{const s=u.useRef();return u.useEffect(()=>{s.current=n?s.current:e},[e,n]),s.current},W=(e,n,s,c)=>e.getFixedT(n,s,c),re=(e,n,s,c)=>u.useCallback(W(e,n,s,c),[e,n,s,c]),le=(e,n={})=>{var O,P,I,R;const{i18n:s}=n,{i18n:c,defaultNS:a}=u.useContext(ce)||{},t=s||c||G();if(t&&!t.reportNamespaces&&(t.reportNamespaces=new ae),!t){v(t,"NO_I18NEXT_INSTANCE","useTranslation: You will need to pass in an i18next instance by using initReactI18next");const l=(m,f)=>x(f)?f:oe(f)&&x(f.defaultValue)?f.defaultValue:Array.isArray(m)?m[m.length-1]:m,d=[l,{},!1];return d.t=l,d.i18n={},d.ready=!1,d}(O=t.options.react)!=null&&O.wait&&v(t,"DEPRECATED_OPTION","useTranslation: It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const i={...M(),...t.options.react,...n},{useSuspense:w,keyPrefix:h}=i;let r=e||a||((P=t.options)==null?void 0:P.defaultNS);r=x(r)?[r]:r||["translation"],(R=(I=t.reportNamespaces).addUsedNamespaces)==null||R.call(I,r);const S=(t.isInitialized||t.initializedStoreOnce)&&r.every(l=>se(l,t,i)),q=re(t,n.lng||null,i.nsMode==="fallback"?r:r[0],h),C=()=>q,k=()=>W(t,n.lng||null,i.nsMode==="fallback"?r:r[0],h),[y,_]=u.useState(C);let L=r.join();n.lng&&(L=`${n.lng}${L}`);const E=ie(L),p=u.useRef(!0);u.useEffect(()=>{const{bindI18n:l,bindI18nStore:d}=i;p.current=!0,!S&&!w&&(n.lng?A(t,n.lng,r,()=>{p.current&&_(k)}):T(t,r,()=>{p.current&&_(k)})),S&&E&&E!==L&&p.current&&_(k);const m=()=>{p.current&&_(k)};return l&&(t==null||t.on(l,m)),d&&(t==null||t.store.on(d,m)),()=>{p.current=!1,t&&(l==null||l.split(" ").forEach(f=>t.off(f,m))),d&&t&&d.split(" ").forEach(f=>t.store.off(f,m))}},[t,L]),u.useEffect(()=>{p.current&&S&&_(C)},[t,h,S]);const N=[y,t,S];if(N.t=y,N.i18n=t,N.ready=S,S||!S&&!w)return N;throw new Promise(l=>{n.lng?A(t,n.lng,r,()=>l()):T(t,r,()=>l())})},ue="_barPopover_bt0gi_1",ge="_button_bt0gi_21",D={barPopover:ue,button:ge},de=u.forwardRef(function({onClose:n},s){const c=Object.values(z),a=t=>{U.changeLanguage(t),n(!1)};return u.useEffect(()=>(window.addEventListener("click",n),()=>window.removeEventListener("click",n)),[n,s]),o.jsx("ul",{className:D.barPopover,ref:s,children:c.map(t=>o.jsx("li",{children:o.jsx("button",{className:D.button,onClick:()=>a(t),children:t.toLocaleUpperCase()})},t))})}),me="_langSwitch_1pqwh_1",fe="_currentLang_1pqwh_6",we="_icon_1pqwh_19",Se="_isOpen_1pqwh_27",j={langSwitch:me,currentLang:fe,icon:we,isOpen:Se},he=()=>{const[e,n]=u.useState(!1),s=u.useRef(null),c=i=>(Object.values(z).includes(i)?i:"en").toUpperCase(),a=i=>{i.stopPropagation(),n(w=>!w)},t=i=>{s.current&&!s.current.contains(i.target)&&n(!1)};return o.jsxs("div",{className:j.langSwitch,children:[o.jsxs("button",{onClick:a,className:j.currentLang,name:"openPopover",children:[c(U.language),o.jsx("svg",{className:J(j.icon,{[j.isOpen]:e}),children:o.jsx("use",{xlinkHref:V+"#icon-chevron-down"})})]}),e&&o.jsx(de,{onClose:t,ref:s})]})},pe="_welcomeSection_x0l1i_1",xe="_welcomeSectionContainer_x0l1i_10",_e="_header_x0l1i_13",Le="_welcomeSectionDescribe_x0l1i_17",Ne="_welcomeSectionTitle_x0l1i_23",ke="_welcomeSectionLinks_x0l1i_30",je="_welcomeSectionLink_x0l1i_30",be="_welcomeSectionLinkSignup_x0l1i_44",ve="_welcomeSectionLinkSignin_x0l1i_48",g={welcomeSection:pe,welcomeSectionContainer:xe,header:_e,welcomeSectionDescribe:Le,welcomeSectionTitle:Ne,welcomeSectionLinks:ke,welcomeSectionLink:je,welcomeSectionLinkSignup:be,welcomeSectionLinkSignin:ve},Te=()=>{const{t:e}=le(),n=B(H);return o.jsxs("div",{className:g.welcomeSection,children:[o.jsxs("div",{className:g.header,children:[o.jsx(ee,{}),o.jsx(he,{})]}),o.jsxs("div",{className:g.welcomeSectionContainer,children:[o.jsx("p",{className:g.welcomeSectionDescribe,children:e("recordWater")}),o.jsx("h1",{className:g.welcomeSectionTitle,children:e("waterTitle")}),o.jsx("div",{className:g.welcomeSectionLinks,children:n?o.jsx(b,{to:`/water/${Date.now()}`,className:`${g.welcomeSectionLink} ${g.welcomeSectionLinkSignup}`,children:e("checkWater")}):o.jsxs(o.Fragment,{children:[o.jsx(b,{to:"/register",className:`${g.welcomeSectionLink} ${g.welcomeSectionLinkSignup}`,children:e("tryWater")}),o.jsx(b,{to:"/login",className:`${g.welcomeSectionLink} ${g.welcomeSectionLinkSignin}`,children:e("logIn")})]})})]})]})},Oe=()=>{const[e]=X(),n=Y();let s,c;const a=e.get("token"),t=e.get("user");if(a&&t)try{s=JSON.parse(a),c=JSON.parse(t),n(K(s)),n(Q(!0)),n(Z(c))}catch(i){console.log(i)}return o.jsxs(o.Fragment,{children:[o.jsx(Te,{}),o.jsx(ne,{})]})};export{Oe as default};
