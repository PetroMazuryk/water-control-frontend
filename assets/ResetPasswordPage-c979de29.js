import{u as E,V as S,H as L,c as $,r as p,j as s,h as m,a6 as v,t as u}from"./index-53dbf779.js";import{c as k,a as w,b as F,u as M,o as T}from"./index.esm-3fe91438.js";import{L as V,s as h}from"./Logo-d6c92a74.js";const R="_resetComponent_1fl9c_1",q="_resetForm_1fl9c_9",O="_resetTitle_1fl9c_16",z="_resetLabel_1fl9c_27",A="_resetInput_1fl9c_39",D="_resetInputError_1fl9c_57",H="_resetErrorMessage_1fl9c_71",U="_resetPassword_1fl9c_79",Z="_passwordIconBtn_1fl9c_83",G="_passwordIcon_1fl9c_83",J="_resetButtonsContainer_1fl9c_98",K="_resetBtn_1fl9c_107",e={resetComponent:R,resetForm:q,resetTitle:O,resetLabel:z,resetInput:A,resetInputError:D,resetErrorMessage:H,resetPassword:U,passwordIconBtn:Z,passwordIcon:G,resetButtonsContainer:J,resetBtn:K},Y=()=>{var i,d;const{t:r}=E(),_=S(),a=L(),f=$(),x=new URLSearchParams(_.search).get("token"),[n,j]=p.useState(!1),[c,P]=p.useState(!1),g=()=>j(t=>!t),b=()=>P(t=>!t),N=k({password:w().required("Потрібен пароль").min(7,"Пароль має містити принаймні 7 символів").matches(/^(?=.*[A-Za-z])(?=.*\d)/,"Пароль повинен містити літери та цифри"),confirmPassword:w().oneOf([F("password")],"Паролі мають збігатися").required("Підтвердження пароля є обов’язковим")}),{register:l,handleSubmit:I,formState:{errors:o,isSubmitting:B},reset:y}=M({resolver:T(N),mode:"onBlur"}),C=async({password:t})=>{try{await f(v({token:x,password:t})).unwrap(),u.success("Пароль успішно змінено"),y(),a("/login")}catch{u.error("Не вдалося змінити пароль")}};return s.jsxs("section",{className:e.resetComponent,children:[s.jsx(V,{}),s.jsx("div",{className:"container",children:s.jsxs("form",{className:e.resetForm,onSubmit:I(C),noValidate:!0,children:[s.jsx("h2",{className:e.resetTitle,children:r("changePassword")}),s.jsxs("label",{className:e.resetLabel,children:[s.jsx("span",{children:r("newPassword")}),s.jsxs("span",{className:e.resetPassword,children:[s.jsx("input",{type:n?"text":"password",...l("password"),placeholder:r("placeholderNewPassword"),className:m(e.resetInput,{[e.resetInputError]:o.password})}),s.jsx("button",{type:"button",onClick:g,className:e.passwordIconBtn,children:s.jsx("svg",{className:e.passwordIcon,children:s.jsx("use",{href:`${h}#${n?"icon-eye":"icon-eye-off"}`})})})]}),s.jsx("p",{className:e.resetErrorMessage,children:((i=o.password)==null?void 0:i.message)||" "})]}),s.jsxs("label",{className:e.resetLabel,children:[s.jsx("span",{children:r("confirmPassword")}),s.jsxs("span",{className:e.resetPassword,children:[s.jsx("input",{type:c?"text":"password",...l("confirmPassword"),placeholder:r("repeatPassword"),className:m(e.resetInput,{[e.resetInputError]:o.confirmPassword})}),s.jsx("button",{type:"button",onClick:b,className:e.passwordIconBtn,children:s.jsx("svg",{className:e.passwordIcon,children:s.jsx("use",{href:`${h}#${c?"icon-eye":"icon-eye-off"}`})})})]}),s.jsx("p",{className:e.resetErrorMessage,children:((d=o.confirmPassword)==null?void 0:d.message)||" "})]}),s.jsxs("div",{className:e.resetButtonsContainer,children:[s.jsx("button",{type:"button",className:e.resetBtn,onClick:()=>a("/login"),children:r("cancelOut")}),s.jsx("button",{type:"submit",className:e.resetBtn,disabled:B,children:r("changePasswordBtn")})]})]})})]})};export{Y as default};
