import{M as B,z as y,c as C,r as i,j as s,h as l,a1 as E,l as p}from"./index-636e0e16.js";import{c as S,a as d,b as $,u as v,o as L}from"./index.esm-e79edb69.js";import{s as m}from"./sprite-096d9d1a.js";const k="_resetComponent_1p2e1_1",M="_resetTitle_1p2e1_8",F="_resetForm_1p2e1_18",T="_resetLabel_1p2e1_25",R="_resetInput_1p2e1_36",V="_resetInputError_1p2e1_55",q="_resetErrorMessage_1p2e1_70",z="_resetPassword_1p2e1_78",A="_passwordIconBtn_1p2e1_82",D="_passwordIcon_1p2e1_82",O="_resetButtonsContainer_1p2e1_100",U="_resetBtn_1p2e1_109",e={resetComponent:k,resetTitle:M,resetForm:F,resetLabel:T,resetInput:R,resetInputError:V,resetErrorMessage:q,resetPassword:z,passwordIconBtn:A,passwordIcon:D,resetButtonsContainer:O,resetBtn:U},J=()=>{const u=B(),o=y(),w=C(),h=new URLSearchParams(u.search).get("token"),[a,_]=i.useState(!1),[n,x]=i.useState(!1),j=()=>_(t=>!t),b=()=>x(t=>!t),f=S({password:d().required("Потрібен пароль").min(7,"Пароль має містити принаймні 7 символів").matches(/^(?=.*[A-Za-z])(?=.*\d)/,"Пароль повинен містити літери та цифри"),confirmPassword:d().oneOf([$("password")],"Паролі мають збігатися").required("Підтвердження пароля є обов’язковим")}),{register:c,handleSubmit:g,formState:{errors:r,isSubmitting:I},reset:N}=v({resolver:L(f),mode:"onBlur"}),P=async({password:t})=>{try{await w(E({token:h,password:t})).unwrap(),p.success("Пароль успішно змінено"),N(),o("/login")}catch{p.error("Не вдалося змінити пароль")}};return s.jsx("section",{className:e.resetComponent,children:s.jsx("div",{className:"container",children:s.jsxs("form",{className:e.resetForm,onSubmit:g(P),noValidate:!0,children:[s.jsx("h2",{className:e.resetTitle,children:"Зміна пароля"}),s.jsxs("label",{className:e.resetLabel,children:[s.jsx("span",{children:"Новий пароль"}),s.jsxs("span",{className:e.resetPassword,children:[s.jsx("input",{type:a?"text":"password",...c("password"),placeholder:"Введіть новий пароль",className:l(e.resetInput,{[e.resetInputError]:r.password})}),s.jsx("button",{type:"button",onClick:j,className:e.passwordIconBtn,children:s.jsx("svg",{className:e.passwordIcon,children:s.jsx("use",{href:`${m}#${a?"icon-eye":"icon-eye-off"}`})})})]}),r.password&&s.jsx("p",{className:e.resetErrorMessage,children:r.password.message})]}),s.jsxs("label",{className:e.resetLabel,children:[s.jsx("span",{children:"Підтвердити пароль"}),s.jsxs("span",{className:e.resetPassword,children:[s.jsx("input",{type:n?"text":"password",...c("confirmPassword"),placeholder:"Повторіть пароль",className:l(e.resetInput,{[e.resetInputError]:r.confirmPassword})}),s.jsx("button",{type:"button",onClick:b,className:e.passwordIconBtn,children:s.jsx("svg",{className:e.passwordIcon,children:s.jsx("use",{href:`${m}#${n?"icon-eye":"icon-eye-off"}`})})})]}),r.confirmPassword&&s.jsx("p",{className:e.resetErrorMessage,children:r.confirmPassword.message})]}),s.jsxs("div",{className:e.resetButtonsContainer,children:[s.jsx("button",{type:"submit",className:e.resetBtn,disabled:I,children:"Змінити пароль"}),s.jsx("button",{type:"button",className:e.resetBtn,onClick:()=>o("/login"),children:"Скасувати"})]})]})})})};export{J as default};
