import{r as i,M as ke,j as e,b as H,g as F,k as We,m as Se,n as Z,i as De,A as _e,o as Me,u as T,p as je,q as Pe,t as be,v as $e,w as Le,f as fe,x as Ie,y as Ne,z as Re,B as Fe,C as He,D as Ee,E as Ve,F as Ue,G as qe,H as Oe,I as ze,N as pe,J as Q,O as Ge,K as Je,P as Ye,Q as Xe}from"./index-8a40a7d4.js";import{p as K}from"./parseDate-629c4fe8.js";import{s as _,L as Qe}from"./sprite-d963047a.js";import{$ as Ze,c as ve,a as Te,d as ae,u as Be,o as we,C as q,L as Ke}from"./Loader-3f482f47.js";import{u as M}from"./useTranslation-6f0c178a.js";import{L as es}from"./LangSwitch-a3439fca.js";const ee=()=>i.useContext(ke),O=({width:t,height:s})=>e.jsx(Ze,{visible:!0,height:s,width:t,ariaLabel:"color-ring-loading",wrapperStyle:{},wrapperClass:"color-ring-wrapper",colors:["#9be1a0","#f0eff4","#ffffffea","#87d28d","#323f47"]}),ss="_WaterForm_1jleh_1",ts="_FormHeader_1jleh_13",as="_AmountOfWater_1jleh_25",ns="_TapAddWaterWrapper_1jleh_36",os="_TapAddWater_1jleh_36",rs="_TapAddWaterValue_1jleh_88",cs="_RecordingTimeLabel_1jleh_104",ls="_RecordingTime_1jleh_104",is="_WaterValueLabel_1jleh_136",ds="_WaterValue_1jleh_136",ms="_SaveBtn_1jleh_177",j={WaterForm:ss,FormHeader:ts,AmountOfWater:as,TapAddWaterWrapper:ns,TapAddWater:os,TapAddWaterValue:rs,RecordingTimeLabel:cs,RecordingTime:ls,WaterValueLabel:is,WaterValue:ds,SaveBtn:ms,Error:"_Error_1jleh_213"},us=({operationType:t="add",editTime:s,waterPortion:a,waterID:o,handleClose:r})=>{const[l,d]=i.useState(a),m=H(),[B,g]=i.useState(!1),N=new Date(s),h=N.getFullYear(),u=String(N.getMonth()+1).padStart(2,"0"),x=String(N.getDate()).padStart(2,"0"),v=t==="add"?new Date:N,w=String(v.getHours()).padStart(2,"0"),A=String(v.getMinutes()).padStart(2,"0"),[L,I]=i.useState(w),[E,z]=i.useState(A),G=ve().shape({recordingTime:Te().required("recordTimeRequired").matches(/^([0-1]?[0-9]|2[0-3]):[0-5][0-9]$/,"invalidTimeFormat"),waterValue:ae().required("waterValueRequired").min(50,"waterValueGreater").max(5e3,"waterValueLess")}),{control:c,handleSubmit:y,setValue:p,formState:{errors:R}}=Be({resolver:we(G),defaultValues:{recordingTime:`${L}:${E}`,waterValue:l.toString()}}),ne=C=>{const se=new Date(`${h}-${u}-${x}T${L}:${E}:00`).getTime().toString(),ce={amount:C.waterValue,date:se},Ae={amount:C.waterValue,date:se};switch(g(!0),t){case"add":m(Se(ce)).then(({error:le})=>{le?g(!1):(g(!1),r())});break;case"edit":m(We({id:o,formData:Ae})).then(({error:le})=>{le?g(!1):(g(!1),r())});break;default:g(!1);break}},oe=C=>{switch(C){case"add":return e.jsx("p",{className:j.FormHeader,children:"Оберіть значення:"});case"edit":return e.jsx("p",{className:j.FormHeader,children:"Виправити дані:"});default:return e.jsx("p",{className:j.FormHeader,children:"Оберіть значення:"})}},k=C=>{d(C),p("waterValue",C.toString())},D=l===50,re=l===5e3;return e.jsxs("form",{className:j.WaterForm,onSubmit:y(ne),children:[oe(t),e.jsx("p",{className:j.AmountOfWater,children:"Кількість води:"}),e.jsxs("div",{className:j.TapAddWaterWrapper,children:[e.jsx("button",{type:"button",className:j.TapAddWater,onClick:()=>k(Math.max(l-50,0)),disabled:D,children:e.jsx("svg",{children:e.jsx("use",{xlinkHref:_+"#icon-minus"})})}),e.jsxs("p",{className:j.TapAddWaterValue,children:[l," ","ml"]}),e.jsx("button",{type:"button",className:j.TapAddWater,onClick:()=>k(l+50),disabled:re,children:e.jsx("svg",{children:e.jsx("use",{xlinkHref:_+"#icon-plus"})})})]}),e.jsxs("label",{className:j.RecordingTimeLabel,children:["Час запису:",e.jsx(q,{name:"recordingTime",control:c,render:({field:C})=>e.jsx("input",{...C,type:"text",className:F(j.RecordingTime),placeholder:"HH:MM",onChange:J=>{const[se,ce]=J.target.value.split(":");I(se),z(ce),C.onChange(J)}})}),R.recordingTime&&e.jsx("p",{className:j.Error,children:R.recordingTime.message})]}),e.jsxs("label",{className:j.WaterValueLabel,children:["Введіть обєм води:",e.jsx(q,{name:"waterValue",control:c,render:({field:C})=>e.jsx("input",{...C,type:"number",value:l||"",onChange:J=>k(Number(J.target.value)),className:j.WaterValue})}),R.waterValue&&e.jsx("p",{className:j.Error,children:R.waterValue.message})]}),e.jsx("button",{type:"submit",className:j.SaveBtn,disabled:B,children:B?e.jsx(O,{height:44,width:44}):"Зберегти"})]})},xs={DURATION:15},_s="_WaterModal_198kh_1",hs="_WaterModalCloseBtn_198kh_22",ge={WaterModal:_s,WaterModalCloseBtn:hs},he=({operationType:t,onClose:s,water:a={},timestampFromUrl:o=""})=>{const r=()=>{const h=setTimeout(()=>{s(),clearTimeout(h)},xs.DURATION)},l=h=>{switch(h){case"add":return"Додавання води";case"edit":return"Редагувати кількість води";default:return"Додавання води"}},d=Number(o),m=Number(a.date),B=h=>{switch(h){case"add":return d;case"edit":return m}},g=h=>{switch(h){case"add":return 50;case"edit":return a.amount;default:return 50}},N=h=>{switch(h){case"add":return null;case"edit":return a.id;default:return null}};return e.jsxs("div",{className:ge.WaterModal,children:[e.jsx("h1",{children:l(t)}),e.jsx(us,{operationType:t,editTime:B(t),waterPortion:g(t),waterID:N(t),handleClose:r}),e.jsx("button",{type:"button",onClick:r,"aria-label":"closeWaterModal",className:ge.WaterModalCloseBtn,children:e.jsx("svg",{children:e.jsx("use",{xlinkHref:`${_}#icon-x`})})})]})},ps="_btnAdd_zsldf_1",gs="_btnText_zsldf_14",js="_plus_zsldf_15",ie={btnAdd:ps,btnText:gs,plus:js},bs=()=>{const{t}=M(),s=ee(),{date:a}=Z(),o=K(a),r=i.useCallback(()=>{s()},[s]),l=i.useCallback(()=>{s(e.jsx(he,{onClose:r,operationType:"add",timestampFromUrl:o}))},[s,r,o]);return e.jsxs("button",{type:"button",className:ie.btnAdd,onClick:l,children:[e.jsx("svg",{className:ie.plus,children:e.jsx("use",{xlinkHref:`${_}#icon-plus`})}),e.jsx("h2",{className:ie.btnText,children:t("addWater")})]})},fs="_modal_10779_1",Ns="_closeBtn_10779_16",vs="_svg_10779_35",Ts="_modalTextBox_10779_40",Bs="_modalTitle_10779_50",ws="_modalText_10779_40",ys="_modalBtnBox_10779_70",Cs="_userCountItem_10779_80",As="_like_10779_94",ks="_likeActive_10779_105",Ws="_loaderWrapper_10779_110",Ss="_btnCancel_10779_156",W={modal:fs,closeBtn:Ns,svg:vs,modalTextBox:Ts,modalTitle:Bs,modalText:ws,modalBtnBox:ys,userCountItem:Cs,like:As,likeActive:ks,loaderWrapper:Ws,btnCancel:Ss},Ds=({onClose:t,currentAccess:s})=>{const a=H(),[o,r]=i.useState({}),[l,d]=i.useState([]),[m,B]=i.useState(s),g="admin2006@gmail.com";i.useEffect(()=>{async function u(){try{const x=await De();d(x.data.users),B(!m)}catch(x){console.log(x.message)}}u()},[]);const N=()=>{const u=setTimeout(()=>{t(),clearTimeout(u)},_e.DURATION)},h=async(u,x)=>{try{r(w=>({...w,[u]:!0}));const v=await a(Me({id:u,access:!x}));v.error?console.error("Помилка оновлення доступу:",v.error):d(w=>w.map(A=>A.id===u?{...A,access:!x}:A))}catch(v){console.error("Щось пішло не так:",v)}finally{r(v=>({...v,[u]:!1}))}};return e.jsxs("div",{className:W.modal,children:[e.jsx("button",{type:"button","aria-label":"closeDeleteEntryModal",onClick:N,className:W.closeBtn,children:e.jsx("svg",{className:W.svg,children:e.jsx("use",{xlinkHref:_+"#icon-x"})})}),e.jsxs("div",{className:W.modalTextBox,children:[e.jsx("h2",{className:W.modalTitle,children:"Список усіх користувачів"}),l.length>0?e.jsx("ul",{className:W.userCountList,children:l.filter(u=>u.email!==g).map(u=>e.jsxs("li",{className:W.userCountItem,children:[e.jsx("p",{children:u.email}),e.jsx("div",{className:W.loaderWrapper,children:o[u.id]?e.jsx(O,{height:30,width:30}):e.jsx("button",{children:e.jsx("svg",{onClick:()=>h(u.id,u.access),className:`${W.like} ${u.access?W.likeActive:""}`,children:e.jsx("use",{href:`${_}#icon-heart`})})})})]},u.id))}):e.jsx("p",{children:"Користувачі не знайдені."})]})]})},Ms="_btnAdd_a3w66_1",Ps="_btnText_a3w66_15",$s="_plus_a3w66_16",de={btnAdd:Ms,btnText:Ps,plus:$s},Ls=()=>{const{t}=M(),s=ee(),a=i.useCallback(()=>{s(e.jsx(Ds,{onClose:()=>s(null)}))},[s]);return e.jsxs("button",{type:"button",className:de.btnAdd,onClick:a,children:[e.jsx("svg",{className:de.plus,children:e.jsx("use",{xlinkHref:`${_}#icon-admin`})}),e.jsx("h2",{className:de.btnText,children:t("adminBtn")})]})},Is=["januaryDay","februaryDay","marchDay","aprilDay","mayDay","juneDay","julyDay","augustDay","septemberDay","octoberDay","novemberDay","decemberDay"],Rs=(t,s)=>{const a=new Date;return{isToday:a.getFullYear()===t.getFullYear()&&a.getMonth()===t.getMonth()&&a.getDate()===t.getDate(),day:t.getDate(),month:s(Is[t.getMonth()])}},Fs="_selectedDate_14sit_1",Hs={selectedDate:Fs},ye=({className:t})=>{const{t:s}=M(),{date:a}=Z(),{isToday:o,day:r,month:l}=Rs(K(a),s),d=o?s("today"):`${r} ${l}`;return e.jsx("p",{className:F(Hs.selectedDate,t),children:d})},Es="_progressBarContainer_v5cic_1",Vs="_progressBarTitle_v5cic_14",Us="_progressBar_v5cic_1",qs="_progressBarFill_v5cic_29",Os="_belowAim_v5cic_38",zs="_aboveAim_v5cic_44",Gs="_belowAimRate_v5cic_50",Js="_aboveAimRate_v5cic_54",Ys="_ball_v5cic_58",Xs="_percentNumber_v5cic_69",Qs="_percentContainer_v5cic_79",Zs="_percent_v5cic_69",b={progressBarContainer:Es,progressBarTitle:Vs,progressBar:Us,progressBarFill:qs,belowAim:Os,aboveAim:zs,belowAimRate:Gs,aboveAimRate:Js,ball:Ys,percentNumber:Xs,percentContainer:Qs,percent:Zs},Ks=()=>{const t=T(je),a=(l=>!l||l.length===0?0:l.reduce((d,m)=>{const B=m.percentage||0;return d+B},0))(t),o=a<100,r=Math.min(Math.max(a,0),100);return e.jsxs("div",{className:b.progressBarContainer,children:[e.jsx("h3",{className:b.progressBarTitle,children:e.jsx(ye,{})}),e.jsx("div",{className:b.progressBar,children:e.jsxs("div",{className:F(b.progressBarFill,{[b.belowAim]:o,[b.aboveAim]:!o}),style:{width:`${r}%`},children:[e.jsx("p",{className:F(b.percentNumber,{[b.belowAimRate]:o,[b.aboveAimRate]:!o}),children:a>=100?"Норма":`${a.toFixed(0)}%`}),e.jsx("div",{className:F(b.ball,{[b.belowAim]:a<100,[b.aboveAim]:a>=100})})]})}),e.jsxs("div",{className:b.percentContainer,children:[e.jsx("p",{className:b.percent,children:"0%"}),e.jsx("p",{className:b.percent,children:"50%"}),e.jsx("p",{className:b.percent,children:"100%"})]})]})},et="_waterContainer_szgl7_1",st="_normaContainer_szgl7_16",tt="_normaL_szgl7_28",at="_normaText_szgl7_35",nt="_waterTitle_szgl7_53",Y={waterContainer:et,normaContainer:st,normaL:tt,normaText:at,waterTitle:nt},ot=()=>{const{t}=M(),s=T(Pe),a=T(be),o="admin2006@gmail.com",r=s<1?`${s*1e3} ${t("ml")}`:`${s} ${t("l")}`;return e.jsxs("div",{className:Y.waterContainer,children:[e.jsx(Qe,{className:Y.waterTitle}),s===0?"":e.jsxs("div",{className:Y.normaContainer,children:[e.jsx("h2",{className:Y.normaL,children:r}),e.jsx("p",{className:Y.normaText,children:t("dailyNorm")})]}),s===0?"":e.jsx(Ks,{}),s===0?"":e.jsx(bs,{}),a===o&&e.jsx(Ls,{})]})},rt="_btnLogout_1xwlm_1",ct={btnLogout:rt},lt=({handleClose:t})=>{const s=H(),a=$e(),o=()=>{s(Le()).then(({error:r})=>{r||(a("/"),t())})};return e.jsx("button",{type:"button",onClick:o,className:ct.btnLogout,children:"Вийти"})},it="_modal_1spmq_1",dt="_closeBtn_1spmq_16",mt="_svg_1spmq_35",ut="_modalTextBox_1spmq_40",xt="_modalTitle_1spmq_50",_t="_modalText_1spmq_40",ht="_modalBtnBox_1spmq_70",pt="_btnCancel_1spmq_80",P={modal:it,closeBtn:dt,svg:mt,modalTextBox:ut,modalTitle:xt,modalText:_t,modalBtnBox:ht,btnCancel:pt},gt=({onClose:t})=>{const s=T(fe),a=()=>{const o=setTimeout(()=>{t(),clearTimeout(o)},_e.DURATION)};return e.jsxs("div",{className:P.modal,children:[e.jsx("button",{type:"button","aria-label":"closeLogOutModal",onClick:a,className:P.closeBtn,children:e.jsx("svg",{className:P.svg,children:e.jsx("use",{xlinkHref:`${_}#icon-x`})})}),e.jsxs("div",{className:P.modalTextBox,children:[e.jsx("h2",{className:P.modalTitle,children:"Вийти"}),e.jsx("p",{className:P.modalText,children:"Ви дійсно хочете вийти?"})]}),e.jsx("div",{className:P.modalBtnBox,children:s?e.jsx(O,{height:80,width:80}):e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:a,className:P.btnCancel,children:"Скасувати"}),e.jsx(lt,{handleClose:a})]})})]})},Ce="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAHoAAAB6CAMAAABHh7fWAAAAYFBMVEVVYIDn7O3///9MWHvt8vJTXn9PW3ykq7lJVXnq7+9DUHWepbTz9PZfaYd7gppFUnaPlqnb3eOEjaBpco61ucWDiqC+wczQ09rn6OxueJHHytN0fZassr/g5efV29+Vna2U7++XAAAFvElEQVRogcWb67aqOgxGi6UVuQgsEBVv7/+Wp4C6Fdrkq9Zx8mePvQYySZqmSZuKlbfkdd9m1bYphJGi2VZZ29e5/3uEJ7XdFXIQrZQYRSk9/qHYtZ58D/ShM9jkyXwX8wWJwXeH8Oi826pS26Cvoku1bVHdMXRdSZ77oOuqDobujinIvdPTYxcE3arUOrqUmJ+0X6N7kXiDR3ii+q/Q9ekz8AQ/0mNOofNMe43xXLTOKG8n0Pvmc5Ufijf7T9Brf++ywNPMG50fy+/Bg5RHl9Ed6L38apRfRUuH0e3oVgYw9kNUYp/jVnSWhAMPktxQdBVomP9JWWHoKuXfpfS0Sg8rtwYGJ7Wwl2iWrGSSFqcqW5/b9rzOqlORJqxvWPReoDmyTJusj+I3ifqsSaWv3nP0jRxnlYjsGsebaCabOL5mzEJTzoPLDN2Svm2C8mXJfdAvTMifz7F39J4ky+Ya27mTxNeGtPostryhc9Jb5C5yaPzUPNpRbCVzJ/pIGUzuGPAIJ9n66EJnlIvpE0A2bPLzy7UdvSenlbpi6Cvp5unehs4b6kfJmfSwfxKvKVdVTW5B02tGccHIUXShXiOSbImuyVAsM1Bpo/aN9HJdL9AnMhyk2EgPsqF9Rp/m6J5eojWstFGbTnCSfoa2149P8tYHvSXZSryj6dgt9M0HfWPU7t7QtNJCrn3QGb1+PtSe/um4RdoLveaW7u4FfWSSDI+5xWst1PEfuuZyorBokdZPdMXl+4HRunqgIzapC4wWOr+jWzbvDo0uuzuaDgE/0Xo7oQ98Ch8aLcRhRHd8nRMcPVjcoHd8PRscrXcDOi/YB39g8CI36Bp4MDxa1gbNLFo/QptSRCBDjSeFI/oM1Of6z6ALfm7pnQfZsAFtVLESdLEzPQbm4A/ZXPlq3xRBAvAyr/RoVJuPj8bPRM+jvRKFEQ04muxFyz+VeKO5PGVAtwL4wA/Q/ISVmWDThB+hdSW2/Nz6CVptBVlf/hJ9FMDi8RM0Av4VGpL/Ee0fUoB5jYmufNHAjDVjDYy2KrxWD7N+AKuhAQOTy9fikL3N5AJCilBJ75Mq9MghlQkpyLAMuxCozTcXzMdMIEUSKWNy2NMuDTaxzPIBLJpi2GpDle6B44sR3SKpwiDo7hWSl03oHkmQxifBdPiKgccECUgLBwEtHqNHZENaiCTDg6SQj1/At43JMFQCiCEtBdDxGQ3eYwmAFD6DyD3AFuhZ6Fj4gH6GZONQtXVXpAaL3OlpfrTBOS3uRS462MYzGLWRouMuU2mPbGhMwixgMfyi54bGAX1elVRI28DRZJADunl1F32itMbN/dy8wi0uSrfJ45tHKvjcsstx7/hzo+nDk9l7cnh7FkH72LvCN6UDo182pVcnMP6FQb9uxa/Q1CIMOu1fj13AsB8E/X7ssuqwmREEPTtsAtUOgZ4fsXEHi3chMjSozhpkcbCIRVMiS4rBlGN5nLqqAbRqiOUDTMssh8hIu1VK5UjQrqz16JxpGBi+V7b0eg0sIPaGASacqrLZc1lKm7DnetY2iaGR0f2bsuhcLUAv7CjTpOau5hCiaSAR7QaqueJoLdxwd0vMKrceYyupsgveJXFZFw441Qi0ulrGSuuK7nqC4VT7kyWWa7nd84O8gGdiqQTd9GVc7W1yqqTpvcF3uJzBF320iwa/1x6opGg/Ao/w6B2eLho6l22Nt8cUS8QZc2snfK2e44e0NT7aC6XOuM42Hv50OKyZc7S5kp5u7YYPDre0tgNtfK34zLus8D+ZWDu17e3KfRCVJ9nEZ492ZSPByEYcCGdXfCB7G61dBHdDfh6G7L6IQN2ACKC4U2UG/b3i5E0j5rbLV4pTKvPob1ydu1zFXy/60Or8rS7kUlXubfYNcp0MvMXml6Zg74Tv7qGqQwr7oUc6h4997iz6XZY0eHep6XtV0xc98fM8flhgs4nNfz95y3/5olpPgi07CgAAAABJRU5ErkJggg==",jt="_userAvatar_1fnxk_1",bt="_loader_1fnxk_20",ft="_uploadContainer_1fnxk_28",Nt="_icon_1fnxk_36",vt="_ordinaryText_1fnxk_49",Tt="_hideBtn_1fnxk_72",Bt="_userSettingForm_1fnxk_76",wt="_boldText_1fnxk_95",yt="_genderContainer_1fnxk_101",Ct="_radioContainer_1fnxk_106",At="_radioInput_1fnxk_116",kt="_userPreferences_1fnxk_141",Wt="_formNameEmail_1fnxk_147",St="_formWeightTime_1fnxk_152",Dt="_formula_1fnxk_165",Mt="_inputBox_1fnxk_169",Pt="_formulaDescription_1fnxk_193",$t="_formulaExpression_1fnxk_207",Lt="_temporarySymbol_1fnxk_221",It="_formulaDescriptionText_1fnxk_231",Rt="_submitBtn_1fnxk_235",Ft="_loaderWrapper_1fnxk_259",Ht="_boldTextBtn_1fnxk_266",Et="_consumeWater_1fnxk_273",Vt="_userNorma_1fnxk_280",Ut="_langButton_1fnxk_288",qt="_errorMessage_1fnxk_298",n={userAvatar:jt,loader:bt,uploadContainer:ft,icon:Nt,ordinaryText:vt,hideBtn:Tt,userSettingForm:Bt,boldText:wt,genderContainer:yt,radioContainer:Ct,radioInput:At,userPreferences:kt,formNameEmail:Wt,formWeightTime:St,formula:Dt,inputBox:Mt,formulaDescription:Pt,formulaExpression:$t,temporarySymbol:Lt,formulaDescriptionText:It,submitBtn:Rt,loaderWrapper:Ft,boldTextBtn:Ht,consumeWater:Et,userNorma:Vt,langButton:Ut,errorMessage:qt},Ot=({handleClose:t})=>{const s=H(),a=T(Ie),o=T(Ne),[r,l]=i.useState(0),d=T(fe),m=T(Re),B=ve({name:Te().min(2,"Назва має містити не менше 2 символів").max(60,"Максимальна кількість символів імені 60").required("Імя обовязково"),weight:ae().min(0).max(300,"Вага значення менше 300").typeError("Має бути числом"),dailyActiveTime:ae().min(0).max(12,"Час активного спорту").typeError("Має бути числом"),dailyWaterConsumption:ae().min(0).max(8,"Добове споживання води максимум 8 л").typeError("Має бути числом")}),{control:g,register:N,handleSubmit:h,watch:u,formState:{errors:x}}=Be({resolver:we(B),defaultValues:{email:a.email,gender:a.gender,name:a.name,weight:a.weight,dailyActiveTime:a.dailyActiveTime,dailyWaterConsumption:a.dailyWaterConsumption},mode:"onChange"}),v=u("weight"),w=u("gender"),A=u("dailyActiveTime");i.useEffect(()=>{let c;const y=parseInt(v||0),p=parseInt(A||0);w==="woman"?c=y*.03+p*.4:c=y*.04+p*.6,l(Math.min(parseFloat(c),8).toFixed(2))},[A,w,v]);const L=c=>{const{photo:y,...p}=a;/\s$/.test(c.name)&&(c.name=c.name.trim());const ne=Object.keys(p).sort().reduce((k,D)=>(k[D]=p[D],k),{}),oe=Object.keys(c).sort().reduce((k,D)=>(k[D]=c[D],k),{});if(JSON.stringify(ne)!==JSON.stringify(oe)){const{email:k,...D}=c;s(Fe(D)).then(({error:re})=>{re||t()})}else t()},I=c=>{const y=new FormData,p=c.target.files[0];p&&(y.append("avatar",p),s(He(y)))},E=c=>y=>{let p=y.target.value;(p===""||/^(\d+(\.\d{0,3})?|\.\d{1,3})$/.test(p))&&c.onChange(p)},z=c=>()=>{c.value===0&&c.onChange("")},G=c=>()=>{c.value===""?c.onChange(0):c.value.startsWith(".")&&c.onChange("0"+c.value)};return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:n.userAvatar,children:[m?e.jsx("div",{className:n.loader,children:e.jsx(O,{})}):e.jsx("img",{src:o||`${Ce}`,alt:"User photo"}),e.jsxs("label",{children:[e.jsxs("div",{className:n.uploadContainer,children:[e.jsx("svg",{className:n.icon,children:e.jsx("use",{xlinkHref:`${_}#icon-upload`})}),e.jsx("span",{className:n.ordinaryText,children:"Завантажити фото"})]}),e.jsx("input",{className:n.hideBtn,type:"file",accept:"image/*",onChange:I}),x.avatar&&e.jsx("p",{children:x.avatar.message})]})]}),e.jsxs("form",{onSubmit:h(L),className:n.userSettingForm,children:[e.jsx("div",{className:n.genderContainer,children:e.jsxs("label",{className:n.genderIdentity,children:[e.jsx("span",{className:n.boldText,children:"Ваша стать"}),e.jsxs("div",{className:n.radioContainer,children:[e.jsx("input",{type:"radio",id:"woman",className:n.radioInput,...N("gender"),value:"woman",checked:w==="woman"}),e.jsx("label",{htmlFor:"woman",className:n.ordinaryText,children:"Жіноче"}),e.jsx("input",{type:"radio",id:"man",className:n.radioInput,...N("gender"),value:"man",checked:w==="man"}),e.jsx("label",{htmlFor:"man",className:n.ordinaryText,children:"Чоловіче"})]}),x.gender&&e.jsx("p",{className:n.errorMessage,children:x.gender.message})]})}),e.jsxs("div",{className:n.userPreferences,children:[e.jsxs("div",{className:n.formNameEmail,children:[e.jsxs("label",{children:[e.jsx("span",{className:n.boldText,children:"Ваше ім'я"}),e.jsx(q,{render:({field:c})=>e.jsx("input",{...c,className:n.inputBox,placeholder:"Користувач",onChange:y=>{let p=y.target.value;/^\s|\s{2}$/.test(p)||c.onChange(p)}}),name:"name",control:g}),x.name&&e.jsx("p",{className:n.errorMessage,children:x.name.message})]}),e.jsxs("label",{children:[e.jsx("span",{className:n.boldText,children:"Пошта"}),e.jsx("input",{disabled:!0,...N("email"),className:n.inputBox,placeholder:"placeholderEmail"})]}),e.jsxs("div",{className:n.formula,children:[e.jsx("p",{className:n.boldText,children:"Моя щоденна норма"}),e.jsxs("div",{className:n.formulaDescription,children:[e.jsxs("p",{className:n.ordinaryText,children:[e.jsx("span",{children:"Для жінок: "}),e.jsx("span",{className:n.formulaExpression,children:"V=(M*0,03) + (T*0,4)"})]}),e.jsxs("p",{className:n.ordinaryText,children:[e.jsx("span",{children:"Для чоловіків: "}),e.jsx("span",{className:n.formulaExpression,children:"V=(M*0,04) + (T*0,6)"})]})]}),e.jsxs("p",{className:n.ordinaryText,children:[e.jsx("span",{className:n.formulaExpression,children:"* "}),e.jsx("span",{className:n.formulaDescriptionText,children:"* V - об'єм водної норми в літрах на день, М - ваша вага, Т - час активних занять спортом або іншої активної діяльності (у разі відсутності встановіть 0)"})]}),e.jsxs("p",{className:n.ordinaryText,children:[e.jsx("span",{className:n.temporarySymbol,children:"! "}),"Активний час (години)"]})]})]}),e.jsxs("div",{className:n.formWeightTime,children:[e.jsxs("label",{children:[e.jsx("span",{className:n.ordinaryText,children:"Ваша вага (кг):"}),e.jsx(q,{name:"weight",control:g,render:({field:c})=>e.jsx("input",{...c,className:n.inputBox,onChange:E(c),onFocus:z(c),onBlur:G(c)})}),x.weight&&e.jsx("p",{className:n.errorMessage,children:x.weight.message})]}),e.jsxs("label",{children:[e.jsx("span",{className:n.ordinaryText,children:"Час активних занять спортом:"}),e.jsx(q,{name:"dailyActiveTime",control:g,render:({field:c})=>e.jsx("input",{...c,className:n.inputBox,onChange:E(c),onFocus:z(c),onBlur:G(c)})}),x.dailyActiveTime&&e.jsx("p",{className:n.errorMessage,children:x.dailyActiveTime.message})]}),e.jsxs("div",{className:n.consumeWater,children:[e.jsxs("p",{className:n.ordinaryText,children:["Потрібна кількість води в літрах на день:  ",e.jsxs("span",{className:n.userNorma,children:[isNaN(r)?0:r," L"]})]}),e.jsxs("label",{children:[e.jsx("span",{className:n.boldText,children:"Запишіть, скільки води ви вип'єте:"}),e.jsx(q,{name:"dailyWaterConsumption",control:g,render:({field:c})=>e.jsx("input",{...c,className:n.inputBox,onChange:E(c),onFocus:z(c),onBlur:G(c)})}),x.dailyWaterConsumption&&e.jsx("p",{className:n.errorMessage,children:x.dailyWaterConsumption.message})]})]})]})]}),e.jsxs("button",{disabled:d,type:"submit",className:`${n.submitBtn} ${n.boldTextBtn}`,children:["Зберегти",d&&e.jsx("div",{className:n.loaderWrapper,children:e.jsx(O,{height:56,width:56})})]})]})]})},zt="_modalSettingContainer_1md4x_1",Gt="_modalHeader_1md4x_14",Jt="_closeBtn_1md4x_29",Yt="_icon_1md4x_44",te={modalSettingContainer:zt,modalHeader:Gt,closeBtn:Jt,icon:Yt},Xt=({onClose:t})=>e.jsxs("div",{className:te.modalSettingContainer,children:[e.jsxs("div",{className:te.modalHeader,children:[e.jsx("h2",{children:"Налаштування"}),e.jsx(es,{}),e.jsx("button",{type:"button","aria-label":"closeSettingModal",className:te.closeBtn,onClick:t,children:e.jsx("svg",{className:te.icon,children:e.jsx("use",{xlinkHref:_+"#icon-x"})})})]}),e.jsx(Ot,{handleClose:t})]}),Qt="_userBarPopup_1ap7q_1",Zt="_userBarPopupList_1ap7q_16",Kt="_userBarPopupListItem_1ap7q_23",ea="_userBarPopupIcon_1ap7q_40",V={userBarPopup:Qt,userBarPopupList:Zt,userBarPopupListItem:Kt,userBarPopupIcon:ea},sa=()=>{const{t}=M(),s=ee(),a=i.useCallback(()=>{s()},[s]),o=i.useCallback(()=>{s(e.jsx(Xt,{onClose:a}))},[s,a]),r=i.useCallback(()=>{s(e.jsx(gt,{onClose:a}))},[s,a]);return e.jsx("div",{className:V.userBarPopup,children:e.jsxs("ul",{className:V.userBarPopupList,children:[e.jsxs("li",{className:V.userBarPopupListItem,onClick:o,children:[e.jsx("svg",{className:V.userBarPopupIcon,children:e.jsx("use",{xlinkHref:`${_}#icon-settings`})}),t("settingLink")]}),e.jsxs("li",{className:V.userBarPopupListItem,onClick:r,children:[e.jsx("svg",{className:V.userBarPopupIcon,children:e.jsx("use",{xlinkHref:`${_}#icon-log-out`})}),t("logout")]})]})})},ta="_userBarWrapper_1k17p_1",aa="_userBar_1k17p_1",na="_userBarText_1k17p_24",oa="_userBarAvatar_1k17p_32",ra="_userBarIcon_1k17p_44",ca="_rotate_1k17p_56",U={userBarWrapper:ta,userBar:aa,userBarText:na,userBarAvatar:oa,userBarIcon:ra,rotate:ca},la=({name:t})=>{const[s,a]=i.useState(!1),o=T(Ne),r=i.useRef(null),l=m=>{r.current&&!r.current.contains(m.target)&&m.target.name!=="openPopover"&&a(!1)};i.useEffect(()=>(s?document.addEventListener("mousedown",l):document.removeEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}),[s]);const d=()=>{a(m=>!m)};return e.jsxs("div",{className:U.userBarWrapper,children:[e.jsxs("button",{className:U.userBar,type:"button",name:"openPopover",onClick:d,"aria-label":"openCloseUserPanel",children:[e.jsx("div",{className:U.userBarText,children:t}),e.jsx("div",{className:U.userBarAvatar,style:{backgroundImage:`url(${o||Ce})`}}),e.jsx("svg",{className:`${U.userBarIcon} ${s?U.rotate:""}`,children:e.jsx("use",{xlinkHref:`${_}#icon-chevron-down`})})]}),s&&e.jsx("div",{ref:r,children:e.jsx(sa,{})})]})},ia="_userPanel_iff7o_1",da="_userPanelTitle_iff7o_7",ma="_userPanelTitleName_iff7o_18",me={userPanel:ia,userPanelTitle:da,userPanelTitleName:ma},ua=()=>{const{t}=M(),s=T(Ee),a=T(be),o=a?a.split("@")[0]:null,r=s==="User"?o:s;return e.jsxs("div",{className:me.userPanel,children:[e.jsxs("h1",{className:me.userPanelTitle,children:[t("hello"),e.jsx("span",{className:me.userPanelTitleName,children:r})]}),e.jsx(la,{name:s})]})},xa="_btnStyle_445u2_1",_a="_iconStyle_445u2_15",ha="_btnStyleText_445u2_31",ue={btnStyle:xa,iconStyle:_a,btnStyleText:ha},pa=()=>{const{t}=M(),s=ee(),a=i.useCallback(()=>{s()},[s]),{date:o}=Z(),r=K(o).getTime(),l=i.useCallback(()=>{s(e.jsx(he,{onClose:a,operationType:"add",timestampFromUrl:r}))},[s,a,r]);return e.jsxs("button",{className:ue.btnStyle,type:"button",onClick:l,children:[e.jsx("svg",{className:ue.iconStyle,children:e.jsx("use",{xlinkHref:`${_}#icon-plus`})}),e.jsxs("span",{className:ue.btnStyleText,children:[" ",t("addWater")]})]})},ga=t=>{const s=new Date(Number(t)),a=s.getHours(),o=s.getMinutes();if(Ve.language.startsWith("en")){const l=a>=12?"PM":"AM";return`${(a%12||12).toString().padStart(2,"0")}:${o.toString().padStart(2,"0")} ${l}`}else return`${a.toString().padStart(2,"0")}:${o.toString().padStart(2,"0")}`},ja=t=>t>=1e3?{value:t/1e3,text:"л"}:{value:t,text:"мл"},ba="_btnDelete_19mt5_1",fa={btnDelete:ba},Na=({isLoading:t,handleDelete:s})=>e.jsx("button",{type:"button",className:fa.btnDelete,onClick:()=>s(),disabled:t,children:"Видалити"}),va="_modal_z4bq9_1",Ta="_closeBtn_z4bq9_16",Ba="_svg_z4bq9_35",wa="_modalTextBox_z4bq9_40",ya="_modalTitle_z4bq9_50",Ca="_modalText_z4bq9_40",Aa="_modalBtnBox_z4bq9_70",ka="_btnCancel_z4bq9_80",$={modal:va,closeBtn:Ta,svg:Ba,modalTextBox:wa,modalTitle:ya,modalText:Ca,modalBtnBox:Aa,btnCancel:ka},Wa=({id:t,onClose:s})=>{const a=H(),[o,r]=i.useState(!1),l=()=>{const m=setTimeout(()=>{s(),clearTimeout(m)},_e.DURATION)},d=()=>{r(()=>!0),a(Ue(t)).then(({error:m})=>{m?console.error("Помилка видалення запису:",m):l(),r(!1)})};return e.jsxs("div",{className:$.modal,children:[e.jsx("button",{type:"button","aria-label":"closeDeleteEntryModal",onClick:l,className:$.closeBtn,children:e.jsx("svg",{className:$.svg,children:e.jsx("use",{xlinkHref:_+"#icon-x"})})}),e.jsxs("div",{className:$.modalTextBox,children:[e.jsx("h2",{className:$.modalTitle,children:"Видалити запис"}),e.jsx("p",{className:$.modalText,children:"Ви дійсно хочете видалити запис ?"})]}),e.jsx("div",{className:$.modalBtnBox,children:o?e.jsx(O,{height:80,width:80}):e.jsxs(e.Fragment,{children:[e.jsx("button",{type:"button",onClick:l,className:$.btnCancel,children:"Відміна"}),e.jsx(Na,{handleDelete:d,id:t})]})})]})},Sa="_waterItemContent_1msly_1",Da="_waterInfo_1msly_12",Ma="_waterAmount_1msly_15",Pa="_waterDate_1msly_22",$a="_iconWaterGlass_1msly_28",La="_editButton_1msly_40",Ia="_deleteButton_1msly_41",Ra="_containerButtons_1msly_53",Fa="_iconAction_1msly_59",S={waterItemContent:Sa,waterInfo:Da,waterAmount:Ma,waterDate:Pa,iconWaterGlass:$a,editButton:La,deleteButton:Ia,containerButtons:Ra,iconAction:Fa},Ha=({water:t})=>{const s=ee(),a=i.useCallback(()=>{s()},[s]),o=i.useCallback(()=>{s(e.jsx(Wa,{id:t.id,onClose:a}))},[s,a,t]),r=i.useCallback(()=>{s(e.jsx(he,{water:t,onClose:a,operationType:"edit"}))},[s,a,t]),l=ja(t.amount);return e.jsxs("div",{className:S.waterItemContent,children:[e.jsx("svg",{className:S.iconWaterGlass,width:"44",height:"45",children:e.jsx("use",{xlinkHref:_+"#icon-glass"})}),e.jsxs("div",{className:S.waterInfo,children:[e.jsx("p",{className:S.waterAmount,children:`${l.value} ${l.text}`}),e.jsx("p",{className:S.waterDate,children:ga(t.date)})]}),e.jsxs("div",{className:S.containerButtons,children:[e.jsx("button",{className:S.editButton,onClick:r,"aria-label":"Edit the entered amount of water",children:e.jsx("svg",{className:S.iconAction,width:"14",height:"14",children:e.jsx("use",{href:`${_}#icon-edit`})})}),e.jsx("button",{className:S.deleteButton,onClick:o,"aria-label":"Delete the entered amount of water",children:e.jsx("svg",{className:S.iconAction,width:"14",height:"14",children:e.jsx("use",{xlinkHref:`${_}#icon-trash`})})})]})]})},Ea="_waterList_nhslc_1",Va="_messageContainer_nhslc_12",Ua="_noWater_nhslc_21",qa="_skeleton_nhslc_68",Oa="_shimmer_nhslc_1",X={waterList:Ea,messageContainer:Va,noWater:Ua,skeleton:qa,shimmer:Oa},za=()=>{const{t}=M(),s=T(je);return T(qe)?e.jsx("div",{className:X.waterList,children:[1,2,3].map(o=>e.jsx("div",{className:X.skeleton},o))}):s.length?e.jsx("ul",{className:X.waterList,children:s.map(o=>e.jsx("li",{children:e.jsx(Ha,{water:o})},o.id))}):e.jsx("div",{className:X.messageContainer,children:e.jsx("h2",{className:X.noWater,children:t("noWaterMessage")})})},Ga="_info_iy33z_1",Ja="_dailyFont_iy33z_7",Ya="_header_iy33z_20",Xa="_title_iy33z_28",Qa="_button_iy33z_43",Za="_icon_iy33z_67",Ka="_iconBackground_iy33z_90",xe={info:Ga,dailyFont:Ja,header:Ya,title:Xa,button:Qa,icon:Za,iconBackground:Ka},en=()=>e.jsxs("div",{className:xe.info,children:[e.jsxs("div",{className:xe.header,children:[e.jsx(ye,{className:xe.dailyFont}),e.jsx(pa,{})]}),e.jsx(za,{})]}),sn=({title:t,styles:s})=>e.jsx("span",{className:s,children:t}),tn=["january","february","march","april","may","june","july","august","september","october","november","december"],an="_btn_11ww4_1",nn="_btnDisabled_11ww4_13",on="_svgSchedule_11ww4_17",rn="_svgPie_11ww4_18",cn="_calendarTitle_11ww4_28",ln="_month_11ww4_39",dn="_monthInd_11ww4_46",mn="_monthYear_11ww4_69",un="_statisticBtn_11ww4_76",xn="_svgArrowLeft_11ww4_86",_n="_svgArrowRight_11ww4_87",hn="_isHidden_11ww4_98",f={btn:an,btnDisabled:nn,svgSchedule:on,svgPie:rn,calendarTitle:cn,month:ln,monthInd:dn,monthYear:mn,statisticBtn:un,svgArrowLeft:xn,svgArrowRight:_n,isHidden:hn},pn=()=>{const{t}=M(),s=H(),{date:a}=Z(),o=K(a),[r,l]=i.useState(new Date(o).getFullYear()),[d,m]=i.useState(new Date(o).getMonth()),B=T(Oe),N=ze().pathname.split("/").pop(),h=()=>{if(d===11){s(Q(new Date(r+1,0,4).getTime())),m(0),l(r+1);return}s(Q(new Date(r,d+1,4).getTime())),m(d+1)},u=()=>{if(d===0){s(Q(new Date(r-1,11,4).getTime())),m(11),l(r-1);return}s(Q(new Date(r,d-1,4).getTime())),m(d-1)},x=t(tn[d]),v=t(N==="schedule"?"statistics":"month"),w=new Date(Date.now()).getFullYear(),A=new Date(Date.now()).getMonth(),L=new Date(w,A)<=new Date(r,d);return e.jsxs("div",{className:f.calendarTitle,children:[e.jsx(sn,{title:v,styles:f.month}),e.jsxs("div",{className:f.monthInd,children:[e.jsx("button",{onClick:u,className:f.btn,disabled:B,children:e.jsx("svg",{className:f.svgArrowLeft,children:e.jsx("use",{xlinkHref:`${_}#icon-arrow`})})}),e.jsx("span",{className:f.monthYear,children:`${x}, ${r}`}),e.jsx("button",{onClick:h,className:`${f.btn} ${L?f.btnDisabled:""} `,disabled:B||L,children:e.jsx("svg",{className:f.svgArrowRight,children:e.jsx("use",{xlinkHref:`${_}#icon-arrow`})})}),e.jsx(pe,{to:"calendar",className:({isActive:I})=>F(f.statisticBtn,{[f.isHidden]:I}),children:e.jsx("svg",{className:f.svgSchedule,children:e.jsx("use",{xlinkHref:`${_}#icon-pie-chart`})})}),e.jsx(pe,{to:"schedule",className:({isActive:I})=>F(f.statisticBtn,{[f.isHidden]:I}),children:e.jsx("svg",{className:f.svgPie,children:e.jsx("use",{xlinkHref:`${_}#icon-pie-chart`})})})]})]})},gn=()=>e.jsxs("div",{children:[e.jsx(pn,{}),e.jsx(i.Suspense,{fallback:e.jsx(Ke,{}),children:e.jsx(Ge,{})})]}),jn="_waterDetailedInfo_199e5_1",bn={waterDetailedInfo:jn},fn=()=>e.jsxs("section",{className:bn.waterDetailedInfo,children:[e.jsx(ua,{}),e.jsx(en,{}),e.jsx(gn,{})]}),Nn="_waterPage_16oaj_1",vn="_registerPageRight_16oaj_8",Tn={waterPage:Nn,registerPageRight:vn},Wn=()=>{const{date:t}=Z(),s=H(),a=K(t).getTime(),[o,r]=i.useState(!0);return i.useEffect(()=>{if(o){const l=Date.now();s(Je()),s(Ye(a)),s(Q(a)),s(Xe(l)),r(!1)}},[o,a,s]),e.jsxs("div",{className:Tn.waterPage,children:[e.jsx(ot,{}),e.jsx(fn,{})]})};export{Wn as default};
