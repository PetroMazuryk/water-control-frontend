import{c as C,j as s,A as $,k as M,l as f,r as u,u as S,a as A,g as E,m as L}from"./index-4a8c5a44.js";import{A as R}from"./AdvantagesSection-89077f06.js";import{c as a,G as q,a as T,F as z,b as Z}from"./RegisterPage.module-91996c9e.js";import{u as I}from"./useModal-005b11cf.js";import{u as y,c as V,a as v,o as H}from"./index.esm-54a2d9b8.js";import{L as D}from"./Loader-b5477534.js";import{s as h}from"./sprite-59624469.js";import"./Logo-c39c0ff3.js";const G="_modal_1aclm_1",O="_closeBtn_1aclm_15",U="_svg_1aclm_33",W="_modalTextBox_1aclm_38",J="_modalTitle_1aclm_47",K="_modalText_1aclm_38",Q="_modalForm_1aclm_65",X="_inputField_1aclm_73",Y="_errorInput_1aclm_89",ss="_error_1aclm_89",es="_modalBtnBox_1aclm_98",as="_btnSend_1aclm_105",ts="_btnCancel_1aclm_122",t={modal:G,closeBtn:O,svg:U,modalTextBox:W,modalTitle:J,modalText:K,modalForm:Q,inputField:X,errorInput:Y,error:ss,modalBtnBox:es,btnSend:as,btnCancel:ts},os=({onClose:e})=>{const o=C(),{register:r,handleSubmit:i,reset:p,formState:{errors:l,isSubmitting:m}}=y({defaultValues:{email:""}}),d=()=>{const n=setTimeout(()=>{e(),clearTimeout(n)},$.DURATION)},g=async({email:n})=>{try{await o(M(n)).unwrap(),f.success("Посилання для скидання паролю успішно надіслано"),p()}catch(x){f.error(typeof x=="string"?x:"Сталася помилка. Спробуйте ще раз.")}};return s.jsxs("div",{className:t.modal,children:[s.jsx("button",{type:"button","aria-label":"closeForgotPasswordModal",onClick:d,className:t.closeBtn,children:s.jsx("svg",{className:t.svg,children:s.jsx("use",{xlinkHref:`${h}#icon-x`})})}),s.jsxs("div",{className:t.modalTextBox,children:[s.jsx("h2",{className:t.modalTitle,children:"Забули пароль?"}),s.jsx("p",{className:t.modalText,children:"Ми надішлемо вам електронного листа з посиланням для скидання пароля."})]}),s.jsxs("form",{onSubmit:i(g),className:t.modalForm,children:[s.jsx("input",{type:"email",placeholder:"Введіть свою електронну пошту",...r("email",{required:"Обовʼязково введіть email",pattern:{value:/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,message:"Некоректний формат електронної пошти"}}),className:`${t.inputField} ${l.email?t.errorInput:""}`}),l.email&&s.jsx("div",{className:t.error,children:l.email.message}),s.jsxs("div",{className:t.modalBtnBox,children:[s.jsx("button",{type:"submit",className:t.btnSend,disabled:m,children:m?"Надсилання...":"Відправити посилання для скидання паролю"}),s.jsx("button",{type:"button",className:t.btnCancel,onClick:d,children:"Відміна"})]})]})]})},rs="_textBtn_12uyc_1",ls="_forgotPasswordBtn_12uyc_6",F={textBtn:rs,forgotPasswordBtn:ls},ns=()=>{const e=I(),o=u.useCallback(()=>{e()},[e]),r=u.useCallback(()=>{e(s.jsx(os,{onClose:o}))},[e,o]);return s.jsxs("p",{className:F.textBtn,children:["Забули пароль?",s.jsx("button",{type:"button",className:F.forgotPasswordBtn,onClick:r,children:"Натисніть сюди"}),"для зміни паролю"]})},cs=()=>{var j,_,b,N,w,B;const{t:e}=S(),o=C(),r=A(E),[i,p]=u.useState(!1),l=I(),m=u.useCallback(()=>{l()},[l]),d=V({email:v().required(e("emailRequired")).email(e("enterValidEmail")),password:v().required(e("passwordRequired")).min(7,e("passwordTooShort")).matches(/^(?=.*[A-Za-z])(?=.*\d)[A-Za-z\d]{8,}$/,e("passwordMatches"))}),g=()=>{p(!i)},{register:n,handleSubmit:x,formState:{errors:c}}=y({resolver:H(d)}),P=k=>{o(L(k))};return s.jsx("div",{className:a.registerComponent,children:s.jsxs("form",{onSubmit:x(P),children:[s.jsx("h2",{className:a.registerTitle,children:e("logInTitle")}),s.jsxs("div",{className:a.registerForm,children:[s.jsxs("label",{className:a.registerLabel,children:[e("email"),s.jsx("input",{className:(j=c.email)!=null&&j.message?`${a.registerInputError}`:`${a.registerInput}`,...n("email"),placeholder:e("placeholderEmail")}),(_=c.email)!=null&&_.message?s.jsx("p",{className:a.registerErrorMessage,children:(b=c.email)==null?void 0:b.message}):""]}),s.jsxs("label",{className:a.registerLabel,children:[s.jsx("span",{children:e("password")}),s.jsxs("span",{className:a.registerPassword,children:[s.jsx("input",{type:i?"text":"password",className:(N=c.password)!=null&&N.message?`${a.registerInputError}`:`${a.registerInput}`,...n("password"),placeholder:e("placeholderPassword")}),s.jsx("button",{className:a.passwordIconBtn,type:"button",onClick:g,children:i===!1?s.jsx("svg",{className:a.passwordIcon,children:s.jsx("use",{xlinkHref:h+"#icon-eye-off"})}):s.jsx("svg",{className:a.passwordIcon,children:s.jsx("use",{xlinkHref:h+"#icon-eye"})})})]}),(w=c.password)!=null&&w.message?s.jsx("p",{className:a.registerErrorMessage,children:(B=c.password)==null?void 0:B.message}):""]}),s.jsx(ns,{onClose:m})]}),r?s.jsx("div",{className:a.registerButtonsContainer,children:s.jsx(D,{height:44,width:44,label:"Увійти"})}):s.jsxs("div",{className:a.registerButtonsContainer,children:[s.jsx("button",{disabled:r&&!0,className:a.registerBtn,type:"submit",children:e("logIn")}),s.jsx(q,{})]})]})})},js=()=>{const{t:e}=S();return s.jsxs("div",{className:T.registerPage,children:[s.jsxs(z,{children:[s.jsx(cs,{}),s.jsx(Z,{link:"/register",text:e("footerText"),linkName:e("register")})]}),s.jsx("div",{className:T.registerPageRight,children:s.jsx(R,{})})]})};export{js as default};
