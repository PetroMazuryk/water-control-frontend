import{u as y,V as C,H as E,c as S,r as i,j as s,h as d,a6 as L,t as p}from"./index-64ba38fb.js";import{c as $,a as m,b as v,u as k,o as F}from"./index.esm-7d4ea458.js";import{L as M,s as u}from"./Logo-cfab5564.js";const T="_resetComponent_1fl9c_1",V="_resetForm_1fl9c_9",R="_resetTitle_1fl9c_16",q="_resetLabel_1fl9c_27",z="_resetInput_1fl9c_39",A="_resetInputError_1fl9c_57",D="_resetErrorMessage_1fl9c_71",H="_resetPassword_1fl9c_79",O="_passwordIconBtn_1fl9c_83",U="_passwordIcon_1fl9c_83",Z="_resetButtonsContainer_1fl9c_98",G="_resetBtn_1fl9c_107",e={resetComponent:T,resetForm:V,resetTitle:R,resetLabel:q,resetInput:z,resetInputError:A,resetErrorMessage:D,resetPassword:H,passwordIconBtn:O,passwordIcon:U,resetButtonsContainer:Z,resetBtn:G},W=()=>{const{t:o}=y(),w=C(),a=E(),h=S(),_=new URLSearchParams(w.search).get("token"),[n,f]=i.useState(!1),[c,x]=i.useState(!1),j=()=>f(t=>!t),b=()=>x(t=>!t),g=$({password:m().required("Потрібен пароль").min(7,"Пароль має містити принаймні 7 символів").matches(/^(?=.*[A-Za-z])(?=.*\d)/,"Пароль повинен містити літери та цифри"),confirmPassword:m().oneOf([v("password")],"Паролі мають збігатися").required("Підтвердження пароля є обов’язковим")}),{register:l,handleSubmit:P,formState:{errors:r,isSubmitting:I},reset:N}=k({resolver:F(g),mode:"onBlur"}),B=async({password:t})=>{try{await h(L({token:_,password:t})).unwrap(),p.success("Пароль успішно змінено"),N(),a("/login")}catch{p.error("Не вдалося змінити пароль")}};return s.jsxs("section",{className:e.resetComponent,children:[s.jsx(M,{}),s.jsx("div",{className:"container",children:s.jsxs("form",{className:e.resetForm,onSubmit:P(B),noValidate:!0,children:[s.jsx("h2",{className:e.resetTitle,children:o("changePassword")}),s.jsxs("label",{className:e.resetLabel,children:[s.jsx("span",{children:o("newPassword")}),s.jsxs("span",{className:e.resetPassword,children:[s.jsx("input",{type:n?"text":"password",...l("password"),placeholder:"Введіть новий пароль",className:d(e.resetInput,{[e.resetInputError]:r.password})}),s.jsx("button",{type:"button",onClick:j,className:e.passwordIconBtn,children:s.jsx("svg",{className:e.passwordIcon,children:s.jsx("use",{href:`${u}#${n?"icon-eye":"icon-eye-off"}`})})})]}),r.password&&s.jsx("p",{className:e.resetErrorMessage,children:r.password.message})]}),s.jsxs("label",{className:e.resetLabel,children:[s.jsx("span",{children:"Підтвердити пароль"}),s.jsxs("span",{className:e.resetPassword,children:[s.jsx("input",{type:c?"text":"password",...l("confirmPassword"),placeholder:"Повторіть пароль",className:d(e.resetInput,{[e.resetInputError]:r.confirmPassword})}),s.jsx("button",{type:"button",onClick:b,className:e.passwordIconBtn,children:s.jsx("svg",{className:e.passwordIcon,children:s.jsx("use",{href:`${u}#${c?"icon-eye":"icon-eye-off"}`})})})]}),r.confirmPassword&&s.jsx("p",{className:e.resetErrorMessage,children:r.confirmPassword.message})]}),s.jsxs("div",{className:e.resetButtonsContainer,children:[s.jsx("button",{type:"button",className:e.resetBtn,onClick:()=>a("/login"),children:"Скасувати"}),s.jsx("button",{type:"submit",className:e.resetBtn,disabled:I,children:"Змінити пароль"})]})]})})]})};export{W as default};
