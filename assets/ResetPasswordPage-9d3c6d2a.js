import{M as k,z as B,c as y,r as i,j as s,h as l,a1 as C,l as d}from"./index-4003f5b7.js";import{c as E,a as p,b as S,u as $,o as v}from"./index.esm-6e0f7c75.js";import{s as m}from"./sprite-7223e286.js";const L="_resetComponent_1k05o_1",M="_resetTitle_1k05o_11",F="_resetForm_1k05o_21",T="_resetLabel_1k05o_28",R="_resetInput_1k05o_40",V="_resetInputError_1k05o_59",q="_resetErrorMessage_1k05o_74",z="_resetPassword_1k05o_82",A="_passwordIconBtn_1k05o_86",D="_passwordIcon_1k05o_86",O="_resetButtonsContainer_1k05o_104",U="_resetBtn_1k05o_113",e={resetComponent:L,resetTitle:M,resetForm:F,resetLabel:T,resetInput:R,resetInputError:V,resetErrorMessage:q,resetPassword:z,passwordIconBtn:A,passwordIcon:D,resetButtonsContainer:O,resetBtn:U},J=()=>{const u=k(),o=B(),w=y(),h=new URLSearchParams(u.search).get("token"),[a,_]=i.useState(!1),[n,x]=i.useState(!1),j=()=>_(t=>!t),b=()=>x(t=>!t),f=E({password:p().required("Потрібен пароль").min(7,"Пароль має містити принаймні 7 символів").matches(/^(?=.*[A-Za-z])(?=.*\d)/,"Пароль повинен містити літери та цифри"),confirmPassword:p().oneOf([S("password")],"Паролі мають збігатися").required("Підтвердження пароля є обов’язковим")}),{register:c,handleSubmit:g,formState:{errors:r,isSubmitting:I},reset:N}=$({resolver:v(f),mode:"onBlur"}),P=async({password:t})=>{try{await w(C({token:h,password:t})).unwrap(),d.success("Пароль успішно змінено"),N(),o("/login")}catch{d.error("Не вдалося змінити пароль")}};return s.jsx("section",{className:e.resetComponent,children:s.jsx("div",{className:"container",children:s.jsxs("form",{className:e.resetForm,onSubmit:g(P),noValidate:!0,children:[s.jsx("h2",{className:e.resetTitle,children:"Зміна пароля"}),s.jsxs("label",{className:e.resetLabel,children:[s.jsx("span",{children:"Новий пароль"}),s.jsxs("span",{className:e.resetPassword,children:[s.jsx("input",{type:a?"text":"password",...c("password"),placeholder:"Введіть новий пароль",className:l(e.resetInput,{[e.resetInputError]:r.password})}),s.jsx("button",{type:"button",onClick:j,className:e.passwordIconBtn,children:s.jsx("svg",{className:e.passwordIcon,children:s.jsx("use",{href:`${m}#${a?"icon-eye":"icon-eye-off"}`})})})]}),r.password&&s.jsx("p",{className:e.resetErrorMessage,children:r.password.message})]}),s.jsxs("label",{className:e.resetLabel,children:[s.jsx("span",{children:"Підтвердити пароль"}),s.jsxs("span",{className:e.resetPassword,children:[s.jsx("input",{type:n?"text":"password",...c("confirmPassword"),placeholder:"Повторіть пароль",className:l(e.resetInput,{[e.resetInputError]:r.confirmPassword})}),s.jsx("button",{type:"button",onClick:b,className:e.passwordIconBtn,children:s.jsx("svg",{className:e.passwordIcon,children:s.jsx("use",{href:`${m}#${n?"icon-eye":"icon-eye-off"}`})})})]}),r.confirmPassword&&s.jsx("p",{className:e.resetErrorMessage,children:r.confirmPassword.message})]}),s.jsxs("div",{className:e.resetButtonsContainer,children:[s.jsx("button",{type:"button",className:e.resetBtn,onClick:()=>o("/login"),children:"Скасувати"}),s.jsx("button",{type:"submit",className:e.resetBtn,disabled:I,children:"Змінити пароль"})]})]})})})};export{J as default};
